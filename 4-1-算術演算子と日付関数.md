事前準備としてChatGPTに適当に生成してもらったテーブルとデータ(`4-0-generate.sql`)を作成する。今回、主キーはauto_incrementさせている。
```
mysql> source 4-0-generate.sql
Query OK, 1 row affected, 1 warning (0.00 sec)

Database changed
Query OK, 0 rows affected, 1 warning (0.02 sec)

Query OK, 29 rows affected (0.03 sec)
Records: 29  Duplicates: 0  Warnings: 0

mysql> describe employee;
+------------+---------------+------+-----+---------+----------------+
| Field      | Type          | Null | Key | Default | Extra          |
+------------+---------------+------+-----+---------+----------------+
| id         | int           | NO   | PRI | NULL    | auto_increment |
| first_name | varchar(50)   | YES  |     | NULL    |                |
| last_name  | varchar(50)   | YES  |     | NULL    |                |
| birth_date | date          | YES  |     | NULL    |                |
| salary     | decimal(10,2) | YES  |     | NULL    |                |
| bonus_rate | float         | YES  |     | NULL    |                |
+------------+---------------+------+-----+---------+----------------+
```

mysqlでは絞り込み結果や条件に演算子を追加することができる。演算子には四則演算や剰余がある。
```
mysql> select *,salary + 100 as "理想の給料" from employee limit 5;
+----+------------+-----------+------------+----------+------------+-----------------+
| id | first_name | last_name | birth_date | salary   | bonus_rate | 理想の給料      |
+----+------------+-----------+------------+----------+------------+-----------------+
|  1 | Alice      | Smith     | 1990-05-15 | 50000.00 |       0.05 |        50100.00 |
|  2 | Bob        | Johnson   | 1985-10-23 | 60000.00 |       0.07 |        60100.00 |
|  3 | Charlie    | Brown     | 2000-01-10 | 45000.00 |       0.03 |        45100.00 |
|  4 | Dave       | Wilson    | NULL       | 70000.00 |        0.1 |        70100.00 |
|  5 | Eve        | Taylor    | 1995-07-19 | 55000.00 |       0.06 |        55100.00 |
+----+------------+-----------+------------+----------+------------+-----------------+
```

MySQLには日付、日時に関する関数が用意されている。現在時刻を表示させる場合は`NOW`を、現在の日時を取得する場合には`CURDATE`を用いる。レコードと同時に取得するとすべてのレコードに現在時刻が付与される。日付のフォーマットには`DATE_FORMAT`を用いる。タイムゾーンに注意。
```
mysql> select now();
+---------------------+
| now()               |
+---------------------+
| 2025-02-16 14:46:12 |
+---------------------+

mysql> select curdate() as "現在時刻", date_format(curdate(), "%d/%m/%y") as "フォーマット", convert_tz(now(), "+00:00", "+09:00") as "日本時間";
+--------------+--------------------+---------------------+
| 現在時刻     | フォーマット       | 日本時間            |
+--------------+--------------------+---------------------+
| 2025-02-16   | 16/02/25           | 2025-02-17 00:22:05 |
+--------------+--------------------+---------------------+

mysql> select *, now() from employee limit 5;
+----+------------+-----------+------------+----------+------------+---------------------+
| id | first_name | last_name | birth_date | salary   | bonus_rate | now()               |
+----+------------+-----------+------------+----------+------------+---------------------+
|  1 | Alice      | Smith     | 1990-05-15 | 50000.00 |       0.05 | 2025-02-16 14:44:13 |
|  2 | Bob        | Johnson   | 1985-10-23 | 60000.00 |       0.07 | 2025-02-16 14:44:13 |
|  3 | Charlie    | Brown     | 2000-01-10 | 45000.00 |       0.03 | 2025-02-16 14:44:13 |
|  4 | Dave       | Wilson    | NULL       | 70000.00 |        0.1 | 2025-02-16 14:44:13 |
|  5 | Eve        | Taylor    | 1995-07-19 | 55000.00 |       0.06 | 2025-02-16 14:44:13 |
+----+------------+-----------+------------+----------+------------+---------------------+
```
日付の計算を行うには`DATE_ADD`や`DATE_SUB`を用いる。
```
mysql> select *, date_add(birth_date, interval 1 month) as "誕生日の1ヶ月後", date_sub(birth_date, interval 1 year) as "誕生日の1年前" from employee limit 5;
+----+------------+-----------+------------+----------+------------+------------------------+---------------------+
| id | first_name | last_name | birth_date | salary   | bonus_rate | 誕生日の1ヶ月後        | 誕生日の1年前       |
+----+------------+-----------+------------+----------+------------+------------------------+---------------------+
|  1 | Alice      | Smith     | 1990-05-15 | 50000.00 |       0.05 | 1990-06-15             | 1989-05-15          |
|  2 | Bob        | Johnson   | 1985-10-23 | 60000.00 |       0.07 | 1985-11-23             | 1984-10-23          |
|  3 | Charlie    | Brown     | 2000-01-10 | 45000.00 |       0.03 | 2000-02-10             | 1999-01-10          |
|  4 | Dave       | Wilson    | NULL       | 70000.00 |        0.1 | NULL                   | NULL                |
|  5 | Eve        | Taylor    | 1995-07-19 | 55000.00 |       0.06 | 1995-08-19             | 1994-07-19          |
+----+------------+-----------+------------+----------+------------+------------------------+---------------------+
```
経過年数や日数を確認する場合は`TIMESTAMPDIFF`を使用する。
```
mysql> select *, timestampdiff(day, birth_date, curdate()) as "誕生日からの経過日数" from employee limit 5;
+----+------------+-----------+------------+----------+------------+--------------------------------+
| id | first_name | last_name | birth_date | salary   | bonus_rate | 誕生日からの経過日数           |
+----+------------+-----------+------------+----------+------------+--------------------------------+
|  1 | Alice      | Smith     | 1990-05-15 | 50000.00 |       0.05 |                          12696 |
|  2 | Bob        | Johnson   | 1985-10-23 | 60000.00 |       0.07 |                          14361 |
|  3 | Charlie    | Brown     | 2000-01-10 | 45000.00 |       0.03 |                           9169 |
|  4 | Dave       | Wilson    | NULL       | 70000.00 |        0.1 |                           NULL |
|  5 | Eve        | Taylor    | 1995-07-19 | 55000.00 |       0.06 |                          10805 |
+----+------------+-----------+------------+----------+------------+--------------------------------+
```

その他日付や時間に関する関数はいろいろあるので必要に応じて[日付および時間関数](https://dev.mysql.com/doc/refman/8.0/ja/date-and-time-functions.html)を参照する。